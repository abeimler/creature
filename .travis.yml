sudo: required
language: cpp

services:
  - docker

install:
  - sudo apt-get install -y linux-image-virtual kernel linux-image-extra-virtual
  - curl -sSL https://get.docker.com/ | sudo sh
  - sudo pip install docker-compose

matrix:
  include:
   - compiler: gcc 
     os: linux
     env:
       - CC=gcc
       - CXX=g++
       - WITH_TESTS=0
       - CONTAINER_NAME=build
   - compiler: gcc
     os: linux
     env:
       - CC=gcc
       - CXX=g++
       - WITH_TESTS=1
       - CONTAINER_NAME=test
   - compiler: clang 
     os: linux
     env:
       - CC=clang
       - CXX=clang++
       - WITH_TESTS=0
       - CONTAINER_NAME=build
   - compiler: clang
     os: linux
     env:
       - CC=clang
       - CXX=clang++
       - WITH_TESTS=1
       - CONTAINER_NAME=test

before_script:
  - . ./scripts/travis.prebuild.sh

script:
  - . ./scripts/travis.build.sh